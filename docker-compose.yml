version: "2"

services:
    web:
        build: ./docker/nginx
        depends_on:
            - php
        ports:
            - "80:8080"
        volumes:
            - ./code:/code

    php:
        build: ./docker/php/
        depends_on:
            - composer
        volumes:
            - ./code:/code

    composer:
        build: ./docker/composer
        volumes:
            - ./code:/app
        command: install
